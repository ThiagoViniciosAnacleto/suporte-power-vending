<!DOCTYPE html>

<html lang="pt-br">
<head>
<meta charset="utf-8"/>
<title>Editar Chamado #{{ chamado.id }}</title>
<link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet"/>
</head>
<body>
    <header class="topbar">
        <div class="usuario-info">
            <img src="{{ url_for('static', filename='img/avatar.png') }}" alt="Foto do usuário" class="usuario-avatar">
            <div class="usuario-dados">
                <span class="usuario-nome">{{ session["usuario"] }}</span>
                <span class="usuario-cargo">
                    {% if session["is_admin"] == 1 %}Administrador
                    {% elif session["is_admin"] == 2 %}Técnico
                    {% else %}Usuário Comum
                    {% endif %}
                </span>
            </div>
        </div>
        <div class="topbar-left">
            <h1>{{ titulo_pagina }}</h1>
        </div>
        <div class="topbar-right">
            <form action="/" method="get" class="topbar-form">
                <button type="submit">← Voltar</button>
            </form>
            <form action="/logout" method="get" class="topbar-form">
                <button type="submit">Sair</button>
            </form>
        </div>
    </header>
<main class="form-main">
    {% extends "base.html" %}

    {% block conteudo %}
    <section class="form-card">
        <h2>Editar Chamado</h2>
        <form method="POST" action="/editar/{{ chamado.id }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    
            <label for="responsavel_atendimento">Responsável:</label>
            <input type="text" name="responsavel_atendimento" id="responsavel_atendimento" value="{{ chamado.responsavel_atendimento }}" required>
    
            <label for="data">Data:</label>
            <input type="date" name="data" id="data" value="{{ chamado.data }}" required>
    
            <label for="horario">Horário:</label>
            <input type="time" name="horario" id="horario" value="{{ chamado.horario }}" required>
    
            <label for="cliente">Cliente:</label>
            <input type="text" name="cliente" id="cliente" value="{{ chamado.cliente }}" required>
    
            <label for="empresa">Empresa:</label>
            <input type="text" name="empresa" id="empresa" value="{{ chamado.empresa }}" required>
    
            <label for="porta_ssh">Porta SSH:</label>
            <input type="text" name="porta_ssh" id="porta_ssh" value="{{ chamado.porta_ssh }}">
    
            <label for="tipo_maquina">Tipo de Máquina:</label>
            <input type="text" name="tipo_maquina" id="tipo_maquina" value="{{ chamado.tipo_maquina }}" required>
    
            <label for="relato">Relato:</label>
            <textarea name="relato" id="relato" rows="3" required>{{ chamado.relato }}</textarea>
    
            <label for="prioridade">Prioridade:</label>
            <select name="prioridade" id="prioridade" required>
                <option {% if chamado.prioridade == "Baixa" %}selected{% endif %}>Baixa</option>
                <option {% if chamado.prioridade == "Média" %}selected{% endif %}>Média</option>
                <option {% if chamado.prioridade == "Alta" %}selected{% endif %}>Alta</option>
                <option {% if chamado.prioridade == "Crítica" %}selected{% endif %}>Crítica</option>
            </select>
    
            <label for="origem">Origem:</label>
            <input type="text" name="origem" id="origem" value="{{ chamado.origem }}">
    
            <label for="tipo_acao">Tipo de Ação:</label>
            <input type="text" name="tipo_acao" id="tipo_acao" value="{{ chamado.tipo_acao }}">
    
            <label for="responsavel_acao">Responsável pela Ação:</label>
            <input type="text" name="responsavel_acao" id="responsavel_acao" value="{{ chamado.responsavel_acao }}">
    
            <label for="descricao_acao">Descrição da Ação:</label>
            <textarea name="descricao_acao" id="descricao_acao" rows="3">{{ chamado.descricao_acao }}</textarea>
    
            <label for="status">Status:</label>
            <select name="status" id="status" required>
                <option {% if chamado.status == "Aberto" %}selected{% endif %}>Aberto</option>
                <option {% if chamado.status == "Em andamento" %}selected{% endif %}>Em andamento</option>
                <option {% if chamado.status == "Resolvido" %}selected{% endif %}>Resolvido</option>
                <option {% if chamado.status == "Fechado" %}selected{% endif %}>Fechado</option>
            </select>
    
            <button type="submit">Salvar Alterações</button>
        </form>
    </section>
    {% endblock %}
    
</main>
<script src="{{ url_for('static', filename='scripts.js') }}"></script>
</body>
</html>
